<!DOCTYPE html>
<html lang="en" data-theme="light">
    <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YJDK7X0K15"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YJDK7X0K15');
    </script>
    <meta charSet="utf-8" />
    <meta name="description" content="Jason Browns Code, demos and ideas."/>
    
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fira+Code:wght@400;500&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap" rel="stylesheet">
    <link rel="icon" href="/assets/favicon.svg">
    <link rel="manifest" href="/assets/manifest.webmanifest">
    <link rel="apple-touch-icon" sizes="48x48" href="/assets/icons/icon-48x48.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="/assets/icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/assets/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="256x256" href="/assets/icons/icon-256x256.png">
    <link rel="apple-touch-icon" sizes="384x384" href="/assets/icons/icon-384x384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/assets/icons/icon-512x512.png">
    <link href="/styles/styles.css" rel="stylesheet" />
    <link href="/styles/prism.css" rel="stylesheet" />
    <script src='/js/prism.js'></script>
    <title>3d Shading with Points - Somethinghitme</title>
</head>    <link href="/styles/articleStyles.css" rel="stylesheet" />
  <body>
    <div class="layout">
        <header class="container">
    <nav class="site-header">
        <button id="theme-trigger" class="logo-trigger" aria-label="Toggle Dark Mode">
            <svg class="logo-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12,2A7,7,0,0,0,5,9C5,11.38,6.19,13.47,8,14.74V17A1,1,0,0,0,9,18H15A1,1,0,0,0,16,17V14.74C17.81,13.47,19,11.38,19,9A7,7,0,0,0,12,2M9,21a1,1,0,0,0,1,1h4a1,1,0,0,0,1-1V20H9v1Z"/>
            </svg>
        </button>
        <a href="/" class="logo-text">SomethingHitMe</a>
    </nav>
</header>        <main class="container">
            <article class="article-content">
                <header class="article-header">
                    <div class="article-meta-row">
                        <time datetime="2013-08-17">
                            Saturday, Aug 17, 2013                        </time>
                        <span>&bull;</span>
                        
                            
                                <a href="/tags/javascript.html" class="article-tag">javascript</a>
                            
                                <a href="/tags/canvas.html" class="article-tag">canvas</a>
                            
                                <a href="/tags/graphics.html" class="article-tag">graphics</a>
                            
                                <a href="/tags/tutorial.html" class="article-tag">tutorial</a>
                            
                        
                    </div>
                    <h1 class="article-title">3d Shading with Points</h1>
                </header>
                <section>
                    <p>I was checking out some old books the other day and I came across Commodore Step by Step Graphics Vol 3. It had an interesting looking screenshot for a bit of code, which showed shaded spheres entirely made of points. I thought the effect would look cool if multiple ones were layered over each other to look like planets and moons. So I converted the Basic over to JavaScript using the canvas element to replicate the effect.</p>
<p>This is what is produced with the code.</p>
<p><a href="http://www.somethinghitme.com/wp-content/uploads/2013/08/Planets-with-points-CodePen.png"><img src="/2013/08/16/3d-shading-with-points/images/Planets-with-points-CodePen.webp" alt="Planets with points - CodePen" /></a></p>
<p>So how exactly is this effect achieved?</p>
<p><a href="http://cdpn.io/zEhDB">Full page result on codepen</a></p>
<p>The following function is what's used to generate the planets.</p>
<pre><code class="javascript language-javascript">function drawPlanet(rad, xc, yc, color) {
    color = color || { r: 0, g: 100, b: 160 };
    ctx.fillStyle = "#000"; ctx.beginPath();
    ctx.arc(xc, yc, rad, 0, Math.PI \* 2);
    ctx.fill();
    ctx.closePath();

    ctx.fillStyle = `rgb(${color.r},${color.g},${color.b})`;

    var x1 = parseInt(Math.sqrt(rad * rad - y * y));
    for (var x = -x1; x &lt; x1; x++) {
        var n = parseInt(Math.random() * x1) / 1.5;
        if (n &gt; x1 + x) {
            ctx.fillRect(x + xc, y + yc, 1, 1);
        }
    }
}
</code></pre>
<p>The function drawPlanet takes four parameters. Radius, center x, center y, and the color of the planet. First a solid black arc is created so we can get a proper layering effect, otherwise dots would bleed through and the planets would blend together.</p>
<p>The loop from -rad to rad is where everything takes place. Each iteration as we go down the circle we find out how long the row is from the center x and y position to the edge of the circle. Thanks to <a href="https://twitter.com/yutt">@yutt</a> for pointing me in the right direction.</p>
<p>We have two points to go from, our Radius (center point), and the Y. So using Pythagoras Theorem (a^2 + b^2 = c^2) we have a and c we can figure out b.</p>
<p><a href="http://www.somethinghitme.com/wp-content/uploads/2013/08/radfig1.png"><img src="/2013/08/16/3d-shading-with-points/images/radfig1.webp" alt="radfig1" /></a></p>
<p><a href="http://jsfiddle.net/loktar/yJhLu/">Try the fiddle out to see how it works.</a></p>
<p>We have the point from radius, radius+y to the edge of the circle. Now we are able to iterate from -x to x and get every pixel between the edges of the circle for this row.</p>
<p>Now that we had the width of the row we’re on and can iterate over each pixel, the next step is to determine what pixels we want to show and what pixels we want hidden. That is done in the following section of the function drawPlanet.</p>
<pre><code class="javascript language-javascript">    for (var x = -x1; x &lt; x1; x++) {
        var n = parseInt(Math.random() * x1) / 1.5;
        if (n &gt; x1 + x) {
            ctx.fillRect(x + xc, y + yc, 1, 1);
        }
    }
</code></pre>
<p>The variable n stores a random number between 0 and x1. Next to determine if we plot the point we check if n is greater than x1 + x. So points would only be plotted if n is greater than x+x1 meaning x *has* to cross the barrier, making it more likely points are plotted towards the end of our loop since x would be getting closer to x1 x+x1 would almost be double x1 making it very likely points will be ploted. If we just stopped there we would get a cool effect. Pixels would be randomly plotted for half of the planet. That is where the example in the commodore book ended. However I wanted to get a more spherical effect. All that we need to do for that is divide the value a bit.</p>
<pre><code class="javascript language-javascript">    var n = parseInt(Math.random() * x1) / 1.5;
</code></pre>
<p>I use a default of 1.5 what this does is decreases our random number generated even further making it less likely to plot points farther from the edge. And since the value of x1 follows the width of the circle as it goes down we get a cool spherical shading effect.</p>
<p>Below is an example of the shading you get with difference values for the divisor.</p>
<p><a href="http://www.somethinghitme.com/wp-content/uploads/2013/08/planet-phases.png"><img src="/2013/08/16/3d-shading-with-points/images/planet-phases.webp" alt="planet phases" /></a></p>
<p>And that's pretty much all there is to it. A pretty simple effect that uses some cool math and a bit of random to pull off.</p>
<iframe height="300" style="width: 100%;" scrolling="no" title="Planets with points" src="https://codepen.io/loktar00/embed/zEhDB?height=300&theme-id=690&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/loktar00/pen/zEhDB'>Planets with points</a> by Loktar
  (<a href='https://codepen.io/loktar00'>@loktar00</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>                </section>
            </article>
            <hr/>
            <footer>
                <!-- Author -->
<section class="author-section">
    <img src="/assets/avatar.jpg" alt="Jason Brown" class="author-avatar">
    <div class="author-info">
        <h3 class="author-name">Jason Brown (Loktar)</h3>
        <p class="author-bio">
            Christian, Grandfather, Veteran, lover of everything tech.
        </p>
        <div class="social-row">
            <a href="https://github.com/loktar00" class="social-link">
                <svg viewBox="0 0 24 24"><path d="M12,2A10,10,0,0,0,2,12C2,16.42,4.87,20.17,8.84,21.5C9.34,21.58,9.5,21.27,9.5,21C9.5,20.77,9.5,20.14,9.5,19.31C6.73,19.91,6.14,17.97,6.14,17.97C5.68,16.81,5.03,16.5,5.03,16.5C4.12,15.88,5.1,15.9,5.1,15.9C6.1,15.97,6.63,16.93,6.63,16.93C7.5,18.45,8.97,18,9.54,17.76C9.63,17.11,9.89,16.67,10.17,16.42C7.95,16.17,5.62,15.31,5.62,11.5C5.62,10.39,6,9.5,6.65,8.79C6.55,8.54,6.2,7.5,6.75,6.15C6.75,6.15,7.59,5.88,9.5,7.17C10.29,6.95,11.15,6.84,12,6.84C12.85,6.84,13.71,6.95,14.5,7.17C16.41,5.88,17.25,6.15,17.25,6.15C17.8,7.5,17.45,8.54,17.35,8.79C18,9.5,18.38,10.39,18.38,11.5C18.38,15.32,16.04,16.16,13.81,16.41C14.17,16.72,14.5,17.33,14.5,18.26C14.5,19.6,14.5,20.68,14.5,21C14.5,21.27,14.66,21.59,15.17,21.5C19.14,20.16,22,16.42,22,12A10,10,0,0,0,12,2Z"/></svg>
                GitHub
            </a>
            <a href="https://twitter.com/loktar00" class="social-link">
                <svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                @loktar00
            </a>
            <a href="https://codepen.io/loktar00" class="social-link">
                <svg class='codepen' viewBox="0 1 22 24" fill="none" stroke-width="2"><path transform="translate(-22 0)" d="M22 9.3L33 2l11 7.3v7.4L33 24l-11-7.3z m0 0 11 7.4 11-7.4 m0 7.4L33 9.3l-11 7.4 M33 2v7.3 m0 7.4V24" /></svg>
                CodePen
            </a>
            <a href="https://stackoverflow.com/users/322395/loktar" class="social-link">
                <svg viewBox="0 0 24 24"><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.48-2.189-.451 2.07zm1.359-5.056l9.705 4.53.903-1.95-9.705-4.53-.903 1.95zm2.715-4.785l8.217 6.855 1.359-1.62-8.217-6.855-1.359 1.62zM15.841 0l-1.791.973 6.503 5.977 1.791-.973L15.841 0z"/></svg>
                Stack Overflow
            </a>
            <a href="https://www.dwitter.net/u/loktar" class="social-link">
                <svg viewBox="0 0 24 24"><path d="M6 4v16h2V4H6zm5 0v16h2V4h-2zm5 0v16h2V4h-2z"/></svg>
                Dwitter
            </a>
        </div>
    </div>
</section>            </footer>
            <nav class="post-footer">
    <a class="footer-link" rel="prev" href="/">← All Articles</a>
    <a class="footer-link" rel="prev" href="/2013/06/20/atari-rom-reader-and-color-picker/">Atari Rom Reader, and color picker →</a></nav>        </main>
        <footer class="site-footer">
    © 2026, Built by <a href="https://github.com/loktar00">Jason Brown - Loktar</a>
</footer>    </div>
    <script src='/js/main.js'></script>
  </body>
</html>
