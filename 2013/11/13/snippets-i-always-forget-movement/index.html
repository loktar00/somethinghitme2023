<!DOCTYPE html>
<html lang="en">
    <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YJDK7X0K15"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YJDK7X0K15');
    </script>
    <meta charSet="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" href="/assets/favicon-32x32.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;700&display=swap');
    </style>
    <link rel="manifest" href="/assets/manifest.webmanifest">
    <link rel="apple-touch-icon" sizes="48x48" href="/assets/icons/icon-48x48.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="/assets/icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/assets/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="256x256" href="/assets/icons/icon-256x256.png">
    <link rel="apple-touch-icon" sizes="384x384" href="/assets/icons/icon-384x384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/assets/icons/icon-512x512.png">
    <link href="/styles/styles.css" rel="stylesheet" />
    <link href="/styles/prism.css" rel="stylesheet" />
    <script type='module' src='/js/starscape.js'></script>
    <script src='/js/prism.js'></script>
    <title>Game Dev Movement cheatsheet with examples - Somethinghitme</title>
</head>  <body>
    <div class="layout">
        <header class="header">
    <h1><a aria-current="page" href="/">Somethinghitme</a></h1>
    <h2>Code, demos and ideas.</h2>
</header>        <main class="main">
            <section class="primary">
                <article class="blog-post">
                    <header>
                        <h3>Game Dev Movement cheatsheet with examples</h3>
                        <p>
                            Wednesday, Nov 13, 2013                        </p>
                    </header>
                    <section>
                        <h4 id="akamycheatsheetofhelpfulcode">aka My Cheat Sheet of Helpful Code</h4>
<p>I created <a href="http://www.somethinghitme.com/2010/04/26/game-related-snippets-i-always-forget/" title="Game Related Snippets I always Forget">a blog post way back</a> title Game Snippets I Always Forget. I put it up basically as a dumping ground for random game related bits of code I found myself looking up over.. and over. A few of them are a bit cryptic but that's mostly due to me quickly logging in and pasting before Id forget. While now I have (most) memorized I figured I would revisit the article and add some examples that may help others out. The following are examples dealing with movement, angles, and directions.</p>
<p>As a disclaimer I am not claiming to be an expert in this, I’m sure there are better ways to do some of these and if there are feel free to comment and let me know.</p>
<h4 id="distancecheck">Distance Check</h4>
<p>This one is obviously very important in any sort of game development. What I find myself using it for most is quick collision checks. However its used in many cases, an example found later in this article.</p>
<pre><code class="javascript language-javascript">var x = x2 - x1,
    y = y2 - y1,
    distance = Math.sqrt(x * x + y * y);
</code></pre>
<iframe style="width: 500px; height: 600px;" src="https://jsfiddle.net/loktar/eYw5b/embedded/result,js,html,css/" height="240" width="320" frameborder="0"></iframe>
<h4 id="movetowardsanobjectwitheasing">Move Towards an Object With Easing</h4>
<p>This can be useful for inertia based mouse movement. This moves an object to the designated target, making it move slower the closer it gets to the target.</p>
<pre><code class="javascript language-javascript">x += (targetX-x)/speed;
y += (targetY-y)/speed;
</code></pre>
<iframe style="width: 500px; height: 500px;" src="https://jsfiddle.net/loktar/RE7Ac/embedded/result,js,html,css/" height="240" width="320" frameborder="0"></iframe>
<h4 id="movetowardsanobjectataconstantspeed">Move Towards an Object at a Constant Speed</h4>
<p>The next bit of code can be used for any type of following behavior. The difference from the example above is that the object will move towards its target at a constant speed rather than easing its way there.</p>
<pre><code class="javascript language-javascript">var tx = targetX - x,
    ty = targetY - y,
    dist = Math.sqrt(tx * tx + ty * ty);

velX = (tx / dist) * thrust;
velY = (ty/dist) * thrust;
</code></pre>
<iframe style="width: 500px; height: 500px;" src="https://jsfiddle.net/loktar/x5KHT/embedded/result,js,html,css/" height="240" width="320" frameborder="0"></iframe>
<h4 id="gettheanglebetweenobjectsandprojectapointinfrontoftheobject">Get the Angle Between Objects and Project a Point in Front of the Object</h4>
<p>Its important to note the above example does not include the facing direction in order to get that we need to know what the angle is between both objects.</p>
<pre><code class="javascript language-javascript">var x = this.x - this.targetX,
    y = this.y - this.targetY,
    radians = Math.atan2(y,x);
</code></pre>
<p>Now that we know how to get the angle between two objects we can project a point in front of it. This can be used for positioning a gun, or for the start position of projectiles. Since realistically bullets shouldn’t necessarily come from the center of our object.</p>
<pre><code class="javascript language-javascript">pointx = x + pointLength * Math.cos(radians);
pointy = y + pointLength * Math.sin(radians);
</code></pre>
<iframe style="width: 500px; height: 650px;" src="https://jsfiddle.net/loktar/KAa2J/embedded/result,js,html,css/" height="240" width="320" frameborder="0"></iframe>
<h4 id="movetowardsanotherobjectwithproperrotation">Move Towards Another Object With Proper Rotation</h4>
<p>We can combine the two above samples and now move an object towards another with the correct facing angle. This is obviously beneficial for many reasons.</p>
<iframe style="width: 500px; height: 500px;" src="https://jsfiddle.net/loktar/R6RMp/embedded/result,js,html,css/" height="240" width="320" frameborder="0"></iframe>
<h2 id="puttingsomeinformationtogooduse">Putting Some Information to Good Use</h2>
<p>I assume you will find ways to use this, maybe you already have and just stumbled across this article to take a piece of code, but I wanted to throw an example or two in here just in case. The following is a quick example of how to do simple predefined pathing for tower defense enemies.</p>
<iframe style="width: 500px; height: 600px;" src="https://jsfiddle.net/loktar/cSHmG/embedded/result,js,html,css/" height="240" width="320" frameborder="0"></iframe>
<p>Just by using the code so far in this article you could add towers that shoot, &nbsp;and implement basic collision, having most of whats needed for a very simple tower defense.</p>
<h4 id="moveanobjectbasedonitsheading">Move an Object Based on its Heading</h4>
<p>The last movement example is moving based on the current heading. Meaning moving towards the angle you are facing. The angle can be a target angle, or one set by the user via the arrow keys for example. This is achieved by using the following</p>
<pre><code class="javascript language-javascript">velX = Math.cos(currentAngle) * thrust;
velY = Math.sin(currentAngle) * thrust;
</code></pre>
<p>However if you want a movement style similar to asteroids you can use this instead.</p>
<pre><code class="javascript language-javascript">velX += Math.cos(currentAngle) * thrust;
velY += Math.sin(currentAngle) * thrust;
</code></pre>
<p>You will most likely want to set the thrust to a lower number in the above example since you are adding it each time rather than setting it once.&nbsp;One tip if you are using Asteroids style movement is to apply friction or your object will go on forever. This is easily done by doing the following way.</p>
<pre><code class="javascript language-javascript">velX * = 0.98;
velY * = 0.98;
</code></pre>
<p>Note you can use any value less than one to apply friction the lower the number the faster you will glide to a stop.</p>
<p>Regardless of the type of motion you choose you then apply the velocities to your object.</p>
<pre><code class="javascript language-javascript">this.x -= this.velX;
this.y -= this.velY;
</code></pre>
<p>And here is a finished example showing the Asteroids style movement.</p>
<iframe style="width: 500px; height: 650px;" src="https://jsfiddle.net/loktar/3M6Fa/embedded/result,js,html,css/" height="240" width="320" frameborder="0"></iframe>
<p>I hope you find this information useful. &nbsp;All of the major pieces of the code needed to make many types of games are included in this post. One example where I have personally used the above information is on <a href="http://retroships.com">Retroships.com</a>&nbsp;among many other projects I have worked on.</p>
<p>I’m considering doing another post on a few random bits of code I find myself using often, check back soon!.</p>                    </section>
                    <hr/>
                    <footer>
                                            </footer>
                </article>
                <nav class="nav">
    <ul>
        <li><a class="link-button" rel="prev" href="/2014/03/18/rift-enabled-canvas-demo/">← Rift Enabled Canvas Demo</a></li>        <li><a class="link-button" rel="prev" href="/2013/11/11/simple-2d-terrain-with-midpoint-displacement/">Simple 2d Terrain With Midpoint Displacement →</a></li>    </ul>
</nav>            </section>
            <section class="secondary">
                <aside class="aside-list">
            <h3>Find Me</h3>
            <ol>
                <li><a href="https://twitter.com/loktar00">@loktar00</a></li><li><a href="https://codepen.io/loktar00">Codepen</a></li><li><a href="https://github.com/loktar00">Github</a></li><li><a href="https://stackoverflow.com/users/322395/loktar">Stackoverflow</a></li><li><a href="https://www.dwitter.net/u/loktar">Dwitter</a></li>
            </ol>
        </aside><aside class="aside-list">
            <h3>Projects</h3>
            <ol>
                <li><a href="https://github.com/loktar00/react-lazy-load">react-lazy-load</a></li><li><a href="https://catbrownrealtor.com/">Cat Brown Realtor</a></li><li><a href="https://github.com/loktar00/jest">Jest Game Framework</a></li><li><a href="https://codegolf.stackexchange.com/questions/30322/make-it-look-like-im-working/30335#30335">gui hacker</a></li><li><a href="https://github.com/loktar00/JQuery-Snowfall">jQuery Snowfall</a></li><li><a href="http://www.retroships.com/">RetroShips</a></li><li><a href="https://zombiegames.net/">Zombiegames.net</a></li>
            </ol>
        </aside>            </section>
        </main>
        <footer class="footer">
    © 2023, Built by <a href="https://github.com/loktar00">Loktar</a>
</footer>    </div>
  </body>