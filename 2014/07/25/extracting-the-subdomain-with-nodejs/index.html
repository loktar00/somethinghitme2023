<!DOCTYPE html>
<html lang="en" data-theme="light">
    <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YJDK7X0K15"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YJDK7X0K15');
    </script>
    <meta charSet="utf-8" />
    <meta name="description" content="Jason Browns Code, demos and ideas."/>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fira+Code:wght@400;500&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap" rel="stylesheet">
    <link rel="icon" href="/assets/favicon-32x32.png">
    <link rel="manifest" href="/assets/manifest.webmanifest">
    <link rel="apple-touch-icon" sizes="48x48" href="/assets/icons/icon-48x48.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="/assets/icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/assets/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="256x256" href="/assets/icons/icon-256x256.png">
    <link rel="apple-touch-icon" sizes="384x384" href="/assets/icons/icon-384x384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/assets/icons/icon-512x512.png">
    <link href="/styles/styles.css" rel="stylesheet" />
    <link href="/styles/prism.css" rel="stylesheet" />
    <script src='/js/prism.js'></script>
    <title>Extracting the subdomain with node.js - Somethinghitme</title>
</head>    <link href="/styles/articleStyles.css" rel="stylesheet" />
  <body>
    <div class="layout">
        <header class="container">
    <nav class="site-header">
        <button id="theme-trigger" class="logo-trigger" aria-label="Toggle Dark Mode">
            <svg class="logo-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12,2A7,7,0,0,0,5,9C5,11.38,6.19,13.47,8,14.74V17A1,1,0,0,0,9,18H15A1,1,0,0,0,16,17V14.74C17.81,13.47,19,11.38,19,9A7,7,0,0,0,12,2M9,21a1,1,0,0,0,1,1h4a1,1,0,0,0,1-1V20H9v1Z"/>
            </svg>
        </button>
        <a href="/" class="logo-text">SomethingHitMe</a>
    </nav>
</header>        <main class="container">
            <article class="article-content">
                <header class="article-header">
                    <div class="article-meta-row">
                        <time datetime="2014-07-25">
                            Friday, Jul 25, 2014                        </time>
                        <span>&bull;</span>
                        <span class="article-tag"></span>
                    </div>
                    <h1 class="article-title">Extracting the subdomain with node.js</h1>
                </header>
                <section>
                    <p>Years ago I made some novelty sites with php/apache that used the subdomain to display different messages to the user, I decided to remake one of them using node and wanted to share how this could be done, it was much simpler than I thought it would be.</p>
<p>For this I used <a href="http://expressjs.com/">express</a>, you could do it without pretty easily but express makes it so simple easy to get everything off the ground running. Once you install express you just need to update your routes/index.js to the following.</p>
<pre><code class="javascript language-javascript">exports.index = function(req, res){
    var domain = req.headers.host, subDomain = domain.split('.');

    if (subDomain.length &gt; 2) {
        subDomain = subDomain[0].split("-").join(" ");
    } else {
        subDomain = "Everyone ";
    }

    res.render('index', { subDomain: subDomain }); };
</code></pre>
<p>It's pretty self explanatory but I'll go through it regardless. First we grab the domain host from the request headers, then we do a split on the period this will give us the subdomain and the domain. So a request such as</p>
<blockquote>
  <p>bob.everyonelovesyou.com</p>
</blockquote>
<p>should give us</p>
<pre><code class="javascript language-javascript">    ['bob', 'everyonelovesyou']
</code></pre>
<p>We only care about bob, so if we have the subdomain we split any hyphens and then rejoin with a space so phrases can be passed in such as</p>
<blockquote>
  <p>seriously-bob.everyonelovesyou.com</p>
</blockquote>
<p>and it will become</p>
<blockquote>
  <p>'seriously bob'</p>
</blockquote>
<p>We then just need to pass this to the view so they can be accessed. &nbsp;I use ejs so I can access the subDomain in the view like so</p>
<pre><code class="html language-html">&lt;%= subDomain %&gt;
</code></pre>
<p>The final step is to make sure set a wildcard cname for your domain like the following</p>
<p>*.yourdomain.com</p>
<p>So you can catch all the incoming subdomains. <a href="http://some-text.fuckinghatesyou.com">And here&nbsp;is an example of a site in action</a></p>
<p><a href="https://github.com/loktar00/effinhatesyou">You can get the code from the above site from github</a></p>                </section>
            </article>
            <hr/>
            <footer>
                <!-- Author -->
<section class="author-section">
    <img src="assets/avatar.jpg" alt="Jason Brown" class="author-avatar">
    <div class="author-info">
        <h3 class="author-name">Jason Brown (Loktar)</h3>
        <p class="author-bio">
            Grandfather, Veteran, lover of everything tech.
        </p>
        <div class="social-row">
            <a href="https://github.com/loktar00" class="social-link">
                <svg viewBox="0 0 24 24"><path d="M12,2A10,10,0,0,0,2,12C2,16.42,4.87,20.17,8.84,21.5C9.34,21.58,9.5,21.27,9.5,21C9.5,20.77,9.5,20.14,9.5,19.31C6.73,19.91,6.14,17.97,6.14,17.97C5.68,16.81,5.03,16.5,5.03,16.5C4.12,15.88,5.1,15.9,5.1,15.9C6.1,15.97,6.63,16.93,6.63,16.93C7.5,18.45,8.97,18,9.54,17.76C9.63,17.11,9.89,16.67,10.17,16.42C7.95,16.17,5.62,15.31,5.62,11.5C5.62,10.39,6,9.5,6.65,8.79C6.55,8.54,6.2,7.5,6.75,6.15C6.75,6.15,7.59,5.88,9.5,7.17C10.29,6.95,11.15,6.84,12,6.84C12.85,6.84,13.71,6.95,14.5,7.17C16.41,5.88,17.25,6.15,17.25,6.15C17.8,7.5,17.45,8.54,17.35,8.79C18,9.5,18.38,10.39,18.38,11.5C18.38,15.32,16.04,16.16,13.81,16.41C14.17,16.72,14.5,17.33,14.5,18.26C14.5,19.6,14.5,20.68,14.5,21C14.5,21.27,14.66,21.59,15.17,21.5C19.14,20.16,22,16.42,22,12A10,10,0,0,0,12,2Z"/></svg>
                GitHub
            </a>
            <a href="https://twitter.com/loktar00" class="social-link">
                <svg viewBox="0 0 24 24"><path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10.03 2.38,10.05 2.38,10.08C2.38,12.17 3.86,13.92 5.84,14.32C5.48,14.42 5.09,14.47 4.69,14.47C4.42,14.47 4.15,14.42 3.89,14.38C4.43,16.05 6,17.29 7.89,17.32C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z"/></svg>
                Twitter
            </a>
        </div>
    </div>
</section>            </footer>
            <nav class="post-footer">
    <a class="footer-link" rel="prev" href="/">← All Articles</a>
    <a class="footer-link" rel="prev" href="/2014/03/18/rift-enabled-canvas-demo/">Rift Enabled Canvas Demo →</a></nav>        </main>
        <footer class="site-footer">
    © 2025, Built by <a href="https://github.com/loktar00">Jason Brown - Loktar</a>
</footer>    </div>
    <script src='/js/main.js'></script>
    <script src='/js/menu.js'></script>
  </body>
</html>
