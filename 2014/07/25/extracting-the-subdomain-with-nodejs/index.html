<!DOCTYPE html>
<html lang="en" data-theme="light">
    <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YJDK7X0K15"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YJDK7X0K15');
    </script>
    <meta charSet="utf-8" />
    <meta name="description" content="Jason Browns Code, demos and ideas."/>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" href="/assets/favicon-32x32.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;700&display=swap');
    </style>
    <link rel="manifest" href="/assets/manifest.webmanifest">
    <link rel="apple-touch-icon" sizes="48x48" href="/assets/icons/icon-48x48.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="/assets/icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/assets/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="256x256" href="/assets/icons/icon-256x256.png">
    <link rel="apple-touch-icon" sizes="384x384" href="/assets/icons/icon-384x384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/assets/icons/icon-512x512.png">
    <link href="/styles/styles.css" rel="stylesheet" />
    <link href="/styles/prism.css" rel="stylesheet" />
    <script src='/js/prism.js'></script>
    <title>Extracting the subdomain with node.js - Somethinghitme</title>
</head>  <body>
    <div class="layout">
        <header class="header">
    <div class="header__headings">
        <h1><a aria-current="page" href="/">Somethinghitme</a></h1>
        <h2>My Code, demos and ideas.</h2>
    </div>
    <div class="header__toggle">
        <input type="checkbox" class="toggle">
    </div>
</header>        <main class="main">
            <section class="primary">
                <article class="blog-post">
                    <header>
                        <h3>Extracting the subdomain with node.js</h3>
                        <small>
                            Friday, Jul 25, 2014                        </small>
                    </header>
                    <section>
                        <p>Years ago I made some novelty sites with php/apache that used the subdomain to display different messages to the user, I decided to remake one of them using node and wanted to share how this could be done, it was much simpler than I thought it would be.</p>
<p>For this I used <a href="http://expressjs.com/">express</a>, you could do it without pretty easily but express makes it so simple easy to get everything off the ground running. Once you install express you just need to update your routes/index.js to the following.</p>
<pre><code class="javascript language-javascript">exports.index = function(req, res){
    var domain = req.headers.host, subDomain = domain.split('.');

    if (subDomain.length &gt; 2) {
        subDomain = subDomain[0].split("-").join(" ");
    } else {
        subDomain = "Everyone ";
    }

    res.render('index', { subDomain: subDomain }); };
</code></pre>
<p>It's pretty self explanatory but I'll go through it regardless. First we grab the domain host from the request headers, then we do a split on the period this will give us the subdomain and the domain. So a request such as</p>
<blockquote>
  <p>bob.everyonelovesyou.com</p>
</blockquote>
<p>should give us</p>
<pre><code class="javascript language-javascript">    ['bob', 'everyonelovesyou']
</code></pre>
<p>We only care about bob, so if we have the subdomain we split any hyphens and then rejoin with a space so phrases can be passed in such as</p>
<blockquote>
  <p>seriously-bob.everyonelovesyou.com</p>
</blockquote>
<p>and it will become</p>
<blockquote>
  <p>'seriously bob'</p>
</blockquote>
<p>We then just need to pass this to the view so they can be accessed. &nbsp;I use ejs so I can access the subDomain in the view like so</p>
<pre><code class="html language-html">&lt;%= subDomain %&gt;
</code></pre>
<p>The final step is to make sure set a wildcard cname for your domain like the following</p>
<p>*.yourdomain.com</p>
<p>So you can catch all the incoming subdomains. <a href="http://some-text.fuckinghatesyou.com">And here&nbsp;is an example of a site in action</a></p>
<p><a href="https://github.com/loktar00/effinhatesyou">You can get the code from the above site from github</a></p>                    </section>
                    <hr/>
                    <footer>
                                            </footer>
                </article>
                <nav class="nav">
    <ul>
        <li><a class="link-button" rel="prev" href="/2021/simple-one-element-toggle/">← Simple One Element Toggle</a></li>        <li><a class="link-button" rel="prev" href="/2014/03/18/rift-enabled-canvas-demo/">Rift Enabled Canvas Demo →</a></li>    </ul>
</nav>            </section>
            <section class="secondary">
                <aside class="aside-list">
            <h3>Find Me</h3>
            <ol>
                <li><a href="https://twitter.com/loktar00">@loktar00</a></li><li><a href="https://codepen.io/loktar00">Codepen</a></li><li><a href="https://github.com/loktar00">Github</a></li><li><a href="https://stackoverflow.com/users/322395/loktar">Stackoverflow</a></li><li><a href="https://www.dwitter.net/u/loktar">Dwitter</a></li>
            </ol>
        </aside><aside class="aside-list">
            <h3>Projects</h3>
            <ol>
                <li><a href="https://github.com/loktar00/react-lazy-load">react-lazy-load</a></li><li><a href="https://catbrownrealtor.com/">Cat Brown Realtor</a></li><li><a href="https://github.com/loktar00/jest">Jest Game Framework</a></li><li><a href="https://codegolf.stackexchange.com/questions/30322/make-it-look-like-im-working/30335#30335">gui hacker</a></li><li><a href="https://github.com/loktar00/JQuery-Snowfall">jQuery Snowfall</a></li><li><a href="http://www.retroships.com/">RetroShips</a></li><li><a href="https://zombiegames.net/">Zombiegames.net</a></li>
            </ol>
        </aside>            </section>
        </main>
        <footer class="footer">
    © 2023, Built by <a href="https://github.com/loktar00">Loktar</a>
</footer>    </div>
    <script src='/js/main.js'></script>
    <script type='module' src='/js/starscape.js'></script>
  </body>