<!DOCTYPE html>
<html lang="en" data-theme="light">
    <%- include('/src/templates/partials/head', {title: `${data.main.title} - ${data.main.tagline}`}) -%>
    <body>
        <div class="layout">
            <%- include('/src/templates/partials/header') -%>
            <main class="container">
                <%- include('/src/templates/partials/demo') -%>
                <section class="intro-section">
                    <p class="label-small-caps">Working notes and small writeups.</p>
                    <h1 class="intro-title">Things I'm building and why.</h1>
                    <p class="intro-p">
                        Notes from building software, mostly the parts worth remembering by Jason Brown (Loktar).
                    </p>
                </section>
                <section>
                    <header class="section-header">
                        <span class="label-small-caps"><a name="archive"></a>The Archive</span>
                    </header>
                    <%-
                        data.articles.map(article =>
                            `<article class="article-card">
                                <div class="article-meta">
                                    <time class="article-date">
                                        ${new Date(article.date).toLocaleDateString('en-us', { timeZone: 'UTC', weekday:"long", year:"numeric", month:"short", day:"numeric"})}
                                    </time>
                                    ${article.tagList ? `<div class="article-tags">${article.tagList.map((tag, idx) =>
                                        `<a href="/tags/${article.tagSlugs[idx]}.html" class="article-tag">${tag}</a>`
                                    ).join('')}</div>` : ''}
                                </div>
                                <a href="/${article.path}">
                                    <h2 class="article-title">${article.title}</h2>
                                    <p class="article-synopsis">
                                        ${article.teaser}
                                    </p>
                                </a>
                            </article>`
                        ).join('')
                    -%>
                </section>
                <!-- Pagination -->
                <nav class="pagination">
                    <% if (data.currentPage > 1) { %>
                        <a href="<%= data.currentPage === 2 ? '/' : `/page/${data.currentPage - 1}.html#archive` %>" class="page-link">Previous</a>
                    <% } else { %>
                        <a href="#" class="page-link" disabled style="opacity: 0.5; pointer-events: none;">Previous</a>
                    <% } %>
                    <span class="page-current">Page <%= data.currentPage %> of <%= data.totalPages %></span>
                    <% if (data.currentPage < data.totalPages) { %>
                        <a href="/page/<%= data.currentPage + 1 %>.html#archive" class="page-link">Next</a>
                    <% } else { %>
                        <a href="#" class="page-link" disabled style="opacity: 0.5; pointer-events: none;">Next</a>
                    <% } %>
                </nav>

                <!-- Tag Cloud -->
                <%- include('/src/templates/partials/tagcloud') -%>

                <%- include('/src/templates/partials/projects', {projects: data.projects}) -%>
                <%- include('/src/templates/partials/social', {author: data.author}) -%>
            </main>
            <%- include('/src/templates/partials/footer') -%>
        </div>
        <script src='/js/main.js'></script>
        <script src='/js/demos.js'></script>
    </body>
</html>
