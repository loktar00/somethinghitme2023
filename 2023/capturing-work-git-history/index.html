<!DOCTYPE html>
<html lang="en" data-theme="light">
    <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YJDK7X0K15"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YJDK7X0K15');
    </script>
    <meta charSet="utf-8" />
    <meta name="description" content="Jason Browns Code, demos and ideas."/>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" href="/assets/favicon-32x32.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;700&display=swap');
    </style>
    <link rel="manifest" href="/assets/manifest.webmanifest">
    <link rel="apple-touch-icon" sizes="48x48" href="/assets/icons/icon-48x48.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="/assets/icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/assets/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="256x256" href="/assets/icons/icon-256x256.png">
    <link rel="apple-touch-icon" sizes="384x384" href="/assets/icons/icon-384x384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/assets/icons/icon-512x512.png">
    <link href="/styles/styles.css" rel="stylesheet" />
    <link href="/styles/prism.css" rel="stylesheet" />
    <script src='/js/prism.js'></script>
    <title>Capturing Work Git History for your github activity graph - Somethinghitme</title>
</head>  <body>
    <div class="layout">
        <header class="header">
    <div class="header__headings">
        <h1><a aria-current="page" href="/">Somethinghitme</a></h1>
        <h2>My Code, demos and ideas.</h2>
    </div>
    <div class="header__toggle">
        <input type="checkbox" class="toggle">
    </div>
</header>        <main class="main">
            <section class="primary">
                <article class="blog-post">
                    <header>
                        <h3>Capturing Work Git History for your github activity graph</h3>
                        <small>
                            Monday, Jul 24, 2023                        </small>
                    </header>
                    <section>
                        <h3 id="theproblem">The Problem</h3>
<p>Your working away at your amazing or not so amazing job, pushing branches, comitting code, doing awesome things in general, when you realize…. That's right we don't use Github here! I've been unfortunate enough to work at a few places that don't use Github, but I've wanted to look at my contributions over the year and see how much I've done, plus it's just nice to display publically.</p>
<p>Now before you say it, I know, I know, github activity is not the end all be all, it's not particularly important since you can skew it to your hearts desire… however the same can be said for fitness trackers, or hours on Steam. Everything can be gamed, however if you're disciplined it's nice to see your "real" contributions over time.</p>
<h3 id="thesolution">The Solution</h3>
<h4 id="step1getthecommitdates">Step 1 get the commit dates</h4>
<p>Go into your favorite command line, and browse whatever directory your respository is in. Then run the following command:</p>
<pre><code class="bash language-bash">git log --author=yourEmail@yourCompany.com --pretty=%cd --date=format:'%Y-%m-%d' &gt; stats.log
</code></pre>
<p>This will output a file called stats.log that looks something like this:</p>
<pre><code class="bash language-bash">'2023-03-23'
'2023-03-23'
'2023-03-22'
'2023-03-21'
'2023-03-20'
'2023-03-20'
'2023-03-16'
'2023-03-16'
'2023-03-14'
'2023-03-14'
'2023-03-10'
'2023-03-10'
</code></pre>
<h4 id="step2cleanupthedata">Step 2 clean up the data</h4>
<p>I generally do a quick format, making the dates look like the following:</p>
<pre><code class="JavaScript language-JavaScript">const dates = [
    '2023-03-21',
    '2023-03-20',
    '2023-03-20',
    '2023-03-16',
    '2023-03-16',
    '2023-03-14',
    '2023-03-14',
    '2023-03-10',
    '2023-03-10'
];
</code></pre>
<p>Then I run the following code:</p>
<pre><code class="JavaScript language-JavaScript">const commits = {};

dates.forEach(entry =&gt; {
  if (commits[entry]) {
    commits[entry] += 1;
  } else {
    commits[entry] = 1;
  }
})

const commitData = [];

Object.keys(commits).forEach(commit =&gt; commitData.push({
  date: commit,
  count: commits[commit]
}))

console.log(JSON.stringify(commitData));
</code></pre>
<p>You can either do this in the browser or include it with the node script I'll share further down. It turns the output into the following:</p>
<pre><code class="JavaScript language-JavaScript">    [
        {"date":"2023-05-01","count":5},
        {"date":"2023-03-30","count":2},
        {"date":"2023-03-29","count":2},
        // ...ect
    ]
</code></pre>
<h4 id="step3pushthedatatogithub">Step 3 push the data to github</h4>
<p>I use the following script to add the data to my github activity graph:</p>
<pre><code class="JavaScript language-JavaScript">import fs from 'fs';
import { execSync }  from 'child_process';

const filenames = ['Whatever', 'Files', 'You', 'Want'];

(async function generateHistory() {
    let commitHistory = [];

    filenames.forEach(file =&gt; {
        const data = fs.readFileSync(`${file}.json`, 'utf8');
        const parsedData = JSON.parse(data).filter(el =&gt; parseInt(el.count)).map(el =&gt; {
            const count = parseInt(el.count);
            return new Array(count).fill(el.date);
        });

        commitHistory = [...commitHistory, ...parsedData];
    });

    async function init() {
        for (const history of commitHistory) {
            for (const commit of history) {
                execSync(`echo "${commit}" &gt;&gt; history.txt`);
                execSync(`git add . &amp;&amp; git commit --quiet --date "${commit}" -m "Activity Commit ${commit}"`);
                console.log(commit);
            }
        }
      }

      init();
})();
</code></pre>
<p>Then you just run the script using <code>node script.js</code> And it will modify your local history with the dates and number of commits. These are the core parts of the script:</p>
<pre><code class="JavaScript language-JavaScript">    execSync(`echo "${commit}" &gt;&gt; history.txt`);
    execSync(`git add . &amp;&amp; git commit --quiet --date "${commit}" -m "Activity Commit ${commit}"`);
</code></pre>
<p>The first modifies a file called <code>history.txt</code> and adds a line with the commit so we actually have some changed data. The next line ads the cile, creates a commit with the actual date of the commit.</p>
<p>All we need to do after the script runs is push the changes to github and we're done!</p>
<h3 id="conclusion">Conclusion</h3>
<p>You don't have to lose all of your commit history when you leave a job, and you don't have to wonder how your graph might be looking if you had been using github. This is a quick and easy way to capture your work history and add it to your github activity graph that I've been using for years. </p>
<p>I hope you find it useful!</p>                    </section>
                    <hr/>
                    <footer>
                                            </footer>
                </article>
                <nav class="nav">
    <ul>
                <li><a class="link-button" rel="prev" href="/2023/recreating-this-blog-with-static-generation/">Recreating this blog with static generation →</a></li>    </ul>
</nav>            </section>
            <section class="secondary">
                <aside class="aside-list">
            <h3>Find Me</h3>
            <ol>
                <li><a href="https://twitter.com/loktar00">@loktar00</a></li><li><a href="https://codepen.io/loktar00">Codepen</a></li><li><a href="https://github.com/loktar00">Github</a></li><li><a href="https://stackoverflow.com/users/322395/loktar">Stackoverflow</a></li><li><a href="https://www.dwitter.net/u/loktar">Dwitter</a></li>
            </ol>
        </aside><aside class="aside-list">
            <h3>Projects</h3>
            <ol>
                <li><a href="https://github.com/loktar00/react-lazy-load">react-lazy-load</a></li><li><a href="https://catbrownrealtor.com/">Cat Brown Realtor</a></li><li><a href="https://github.com/loktar00/jest">Jest Game Framework</a></li><li><a href="https://codegolf.stackexchange.com/questions/30322/make-it-look-like-im-working/30335#30335">gui hacker</a></li><li><a href="https://github.com/loktar00/JQuery-Snowfall">jQuery Snowfall</a></li><li><a href="http://www.retroships.com/">RetroShips</a></li><li><a href="https://zombiegames.net/">Zombiegames.net</a></li>
            </ol>
        </aside>            </section>
        </main>
        <footer class="footer">
    © 2023, Built by <a href="https://github.com/loktar00">Loktar</a>
</footer>    </div>
    <script src='/js/main.js'></script>
    <script type='module' src='/js/starscape.js'></script>
  </body>