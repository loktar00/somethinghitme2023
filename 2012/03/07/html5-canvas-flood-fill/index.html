<!DOCTYPE html>
<html lang="en" data-theme="light">
    <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YJDK7X0K15"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YJDK7X0K15');
    </script>
    <meta charSet="utf-8" />
    <meta name="description" content="Jason Browns Code, demos and ideas."/>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" href="/assets/favicon-32x32.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;700&display=swap');
    </style>
    <link rel="manifest" href="/assets/manifest.webmanifest">
    <link rel="apple-touch-icon" sizes="48x48" href="/assets/icons/icon-48x48.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="/assets/icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/icon-144x144.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/assets/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="256x256" href="/assets/icons/icon-256x256.png">
    <link rel="apple-touch-icon" sizes="384x384" href="/assets/icons/icon-384x384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/assets/icons/icon-512x512.png">
    <link href="/styles/styles.css" rel="stylesheet" />
    <link href="/styles/prism.css" rel="stylesheet" />
    <script src='/js/prism.js'></script>
    <title>HTML5 Canvas Flood Fill - Somethinghitme</title>
</head>  <body>
    <div class="layout">
        <header class="header">
    <h1><a aria-current="page" href="/">Somethinghitme</a></h1>
    <h2>Code, demos and ideas.</h2>
</header>        <main class="main">
            <section class="primary">
                <article class="blog-post">
                    <header>
                        <h3>HTML5 Canvas Flood Fill</h3>
                        <small>
                            Wednesday, Mar 7, 2012                        </small>
                    </header>
                    <section>
                        <p>Messing around in JS today (surprising eh?) making an HTML5 vs of rampart-ish. The more I do the less it becomes like rampart. Today I decied to tackle the flood fill portion which is a major part of the gameplay.</p>
<p>Here is the workhorse function</p>
<p>[sourcecode language="js"] function floodFill(mapData, x, y, oldVal, newVal){ var mapWidth = mapData.length, mapHeight = mapData[0].length;</p>
<p>if(oldVal == null){ oldVal=mapData[x][y]; }</p>
<p>if(mapData[x][y] !== oldVal){ return true; }</p>
<p>mapData[x][y] = newVal;</p>
<p>if (x &gt; 0){ floodFill(mapData, x-1, y, oldVal, newVal); }</p>
<p>if(y &gt; 0){ floodFill(mapData, x, y-1, oldVal, newVal); }</p>
<p>if(x &lt; mapWidth-1){ floodFill(mapData, x+1, y, oldVal, newVal); }</p>
<p>if(y &lt; mapHeight-1){ floodFill(mapData, x, y+1, oldVal, newVal); } } [/sourcecode]</p>
<p>Which is called by doing this</p>
<p>[sourcecode language="js"] floodFill(map, 3,3,null,2); [/sourcecode]</p>
<p>map refers to a 2 dimensional array which contains the data, in my case, 0 or 1. The second 2 parameters are the x and y of where to start on the map, null is the initial value to start with, and 2 is the change value parameter, which tells the function to change any tile with the value 0, to 2.</p>
<p>The function is pretty straightforward it recursively checks each points north/south/east/west neighbor until it encounters a neighbors whos value is not 0. <a href="http://jsfiddle.net/loktar/ZLw9m/">Try the code for yourself</a>. I have portions commented out that generate a larger random map to fill for testing purposes. Anything beyond 256x256 has issues within chrome due to stack size restrictions.</p>
<p>Below is the result of the function.</p>
<p><a href="http://www.somethinghitme.com/wp-content/uploads/2012/03/filled.png"><img src="/2012/03/07/html5-canvas-flood-fill/images/filled-300x300.png" alt="" title="Flood Fill" /></a></p>
<p><a href="http://inventwithpython.com/blog/2011/08/11/recursion-explained-with-the-flood-fill-algorithm-and-zombies-and-cats/">And here is a link to some great information on recursive floodfilling</a></p>                    </section>
                    <hr/>
                    <footer>
                                            </footer>
                </article>
                <nav class="nav">
    <ul>
        <li><a class="link-button" rel="prev" href="/2012/03/18/jest-another-html-game-framework/">← JEST another HTML5 Game Framework</a></li>        <li><a class="link-button" rel="prev" href="/2012/02/23/html5-canvas-particle-engine/">HTML5 Canvas Particle engine →</a></li>    </ul>
</nav>            </section>
            <section class="secondary">
                <input type="checkbox" class="toggle">
<aside class="aside-list">
            <h3>Find Me</h3>
            <ol>
                <li><a href="https://twitter.com/loktar00">@loktar00</a></li><li><a href="https://codepen.io/loktar00">Codepen</a></li><li><a href="https://github.com/loktar00">Github</a></li><li><a href="https://stackoverflow.com/users/322395/loktar">Stackoverflow</a></li><li><a href="https://www.dwitter.net/u/loktar">Dwitter</a></li>
            </ol>
        </aside><aside class="aside-list">
            <h3>Projects</h3>
            <ol>
                <li><a href="https://github.com/loktar00/react-lazy-load">react-lazy-load</a></li><li><a href="https://catbrownrealtor.com/">Cat Brown Realtor</a></li><li><a href="https://github.com/loktar00/jest">Jest Game Framework</a></li><li><a href="https://codegolf.stackexchange.com/questions/30322/make-it-look-like-im-working/30335#30335">gui hacker</a></li><li><a href="https://github.com/loktar00/JQuery-Snowfall">jQuery Snowfall</a></li><li><a href="http://www.retroships.com/">RetroShips</a></li><li><a href="https://zombiegames.net/">Zombiegames.net</a></li>
            </ol>
        </aside>            </section>
        </main>
        <footer class="footer">
    © 2023, Built by <a href="https://github.com/loktar00">Loktar</a>
</footer>    </div>
    <script src='/js/main.js'></script>
    <script type='module' src='/js/starscape.js'></script>
  </body>